<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title> Problèmes liés à la mise en cache de fichiers sur un serveur Web  - Blog Firehall</title>
		<!-- For responsive site
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
		-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="author" href="/humans.txt">
		<meta name="description" content="Description Goes Here">
		<link rel="stylesheet" href="/css/style.css">
		<!--[if IE 7]>
			<html class="ie7"> 
			<link rel="stylesheet" type="text/css" href="/css/font-awesome-ie7.min.css">
		<![endif]-->
		<!--[if IE 8]><html class="ie8"> <![endif]-->		
	    <!--[if lt IE 9]>
	      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	    <![endif]-->

		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
		<link rel="shortcut icon" href="ico/favicon.png">	    
	</head>
	<body>
	<!-- Header
	    ================================================== -->
	<header>

	</header>

	<div class="top-strip"></div>
<main class="content">
    <section class="container">
    	<div class="row-fluid">
    		<article class="home-icon">
				<a href="/">
					<img src="/img/fh-icon.png" alt="blog firehall" width="60"/>
					<!--<i class="icon-home"></i> -->
				</a>
			</article>
			<article class="post">
				<h5>
                    
                    3
                    Novembre
                      
                    2014
                </h5>
				<h2 class="content">Problèmes liés à la mise en cache de fichiers sur un serveur Web</h2>
				<section>
					<p>Tôt ou tard l’intégrateur web est confronté à des problèmes liés à la configuration des serveurs web. Parmis eux, l’un des plus courants et la mise en cache de fichiers. Ceci est d’autant plus vrai lorsqu’on est ammené à travailler sur un serveur mutualisé, sur lequel on a pas forcément la main et où les possibilités sont limitées .</p>

<p>Il m’arrive ainsi de temps en temps, de devoir modifier un fichier CSS ou JS sur un environnement de production et de rencontrer ce problème lié au cache : on a beau rafraichir, vider le cache navigateur, rien n’y fait, les mises à jour ne sont pas prises en compte en temps et en heure.</p>

<p><em>Ce type de situation est d’autant plus vrai lorsqu’on ne travaille pas sur un CMS. Ces derniers ayant bien souvent leur propre système de mise en cache (voir de minification) qui règlent le problème (un petit tour dans les préférences du CMS et le cache est désactivé!).</em></p>

<p>La solution proposée aujourd’hui a le mérite d’être très simple à mettre en place et (à priori) de fonctionner à tous les coups. Je l’ai en tout cas mise en pratique très récemment sur un serveur mutualisé d’OVH. </p>

<p>Il s’agit d’<strong>étendre le nom du fichier avec la fonction date de php</strong>. Pour que la mise en cache ne fasse plus effet, il faut simplement que le nom du fichier change en permanence (en tout cas après chaque mise à jour), la solution radicale est donc d’utiliser les minutes et les secondes ce qui donne (par exemple pour une feuille de style css) :</p>

<pre><code>&lt;link rel="stylesheet" href="path/to/css/styles.css?q&lt;?php echo date('i-s'); ?&gt;"&gt;
</code></pre>

<p>Résulat : à chaque rechargement de la page, le nom du fichier sera modifié, le cache est donc tout simplement impossible.</p>

<p>A noter que c’est une solution qu’il est préférable d’utiliser uniquement lorsque le problème apparait, une fois les modifications terminées il est conseillé de rebasculer sur un nom de fichier statique pour permettre la mise en cache et gagner en performances.</p>

					<hr>
				</section>
				<section style="font-weight:bold; margin-bottom: 2em;">
					 
							<a rel="prev" class="a-hover"href="/2014/10/16/list-it-2-le-meta-module-de-cmsms.html"><i class="icon-double-angle-left"></i> ListIt2 le metamodule de CMSMS</a>
						
						 
							<a rel="next" style="float:right" class="a-hover"href="/2014/11/04/espace-reserve-cmsms.html">Un espace réservé sur CmsMadeSimple <i class=" icon-double-angle-right"></i></a>
					
				</section>
				    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'firehall'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
			</article>
		</div>
	</section>
</main>


	<footer>
		<div class="container">
			<a href="http://richbray.me/frap/">Frappuccino</a> | <a href="/">blog.firehall.fr</a>
            <br/><br/>
            <p><strong>A propos :</strong></p>
            <p>Graphiste, webdesigner, puis développeur web depuis plus de 10 ans, ce site est pensé comme un mémo pour mon travail au quotidien.  
                En tant qu'autodidacte qui s'est formé en grande partie sur le web, je ne pouvais que partager ces modestes connaissances.</p>
		</div>
	</footer>

	<!-- Footer
	    ================================================== -->

	<!-- Javascripts 
	    ================================================= -->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/custom.js"></script>
	    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'firehall'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    
    <!-- Analytics
    ================================================== -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52786142-1', 'auto');
      ga('send', 'pageview');

    </script>
    	
	</body>
</html>