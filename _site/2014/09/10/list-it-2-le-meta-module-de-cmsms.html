<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title> ListIt2 le metamodule de CMSMS  - Blog Firehall</title>
		<!-- For responsive site
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
		-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="author" href="/humans.txt">
		<meta name="description" content="Description Goes Here">
		<link rel="stylesheet" href="/css/style.css">
		<!--[if IE 7]>
			<html class="ie7"> 
			<link rel="stylesheet" type="text/css" href="/css/font-awesome-ie7.min.css">
		<![endif]-->
		<!--[if IE 8]><html class="ie8"> <![endif]-->		
	    <!--[if lt IE 9]>
	      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	    <![endif]-->

		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
		<link rel="shortcut icon" href="ico/favicon.png">	    
	</head>
	<body>
	<!-- Header
	    ================================================== -->
	<header>

	</header>

	<div class="top-strip"></div>
<main class="content">
    <section class="container">
    	<div class="row-fluid">
    		<article class="home-icon">
				<a href="/">
					<img src="/img/fh-icon.png" alt="blog firehall" width="60"/>
					<!--<i class="icon-home"></i> -->
				</a>
			</article>
			<article class="post">
				<h5>
                    
                    10
                    Septembre
                      
                    2014
                </h5>
				<h2 class="content">ListIt2 le metamodule de CMSMS</h2>
				<section>
					<h3 id="installation">Installation</h3>

<p>ListIt2 (ou ListItExtended), s’installe comme tous les modules CMSMS, depuis l’interface d’administration :<br />
<strong>Extensions &gt; Gestionnaire de Modules &gt; ListIt2</strong>  </p>

<p>Uhe fois installé, pour l’utiliser il va falloir créer une (ou plusieurs) instance(s):<br />
<strong>Extensions &gt; ListIt2 &gt; Créer une instance</strong>  </p>

<p>L’instance est dès lors disponible sous la forme <strong>ListIt2nomdumodule</strong> dans : <strong>Contenu &gt; ListIt2nomdumodule</strong><br />
Dans l’onglet “options” on peut renommer l’instance pour un nom plus compréhensible, définir le nombre d’éléments à afficher sur une seule page (dans l’admin), définir le préfix d’url ou encore les critères à faire apparaitre dans la liste (utile pour afficher et trier par catégorie).<br />
<em><strong>Rque:</strong> Pour voir le nouveau nom du module, il va falloir vider le cache de cmsms :<br />
<strong>Administration du site &gt; Maintenance du système &gt; cache et contenu &gt; vider le cache</strong></em></p>

<h3 id="crer-les-champs-de-son-module">Créer les champs de son module</h3>

<p>On va ensuite créer nos champs, directement dans l’onglet <strong>Définition de champs</strong>.</p>

<h4 id="crer-et-grer-des-catgories">Créer et gérer des catégories</h4>

<ol>
  <li>
    <p>On choisit en <strong>type de champ : catégories</strong></p>
  </li>
  <li>
    <p>On donne le nom qu’on veut</p>
  </li>
  <li>
    <p>On choisit pour <strong>alias : category</strong></p>
  </li>
  <li>
    <p>On se rend ensuite dans <strong>l’onglet : catégories</strong> et on clique sur <strong>Ajouter catégorie</strong>, pour les créer.</p>
  </li>
</ol>

<p>On va dès lors pouvoir afficher une catégorie précise de son instance, directement dans le gabarit d’une page de cette manière :</p>

<pre><code>{ListIt2monmodule category="alias-de-la-category"}
</code></pre>

<p>Bizarrement, afficher le nom de la catégorie d’un item, dans un gabarit ListIt2 est relativement compliqué.
En effet le code suivant ne va pas afficher le nom de la catégorie, mais plutôt son ID (un chiffre) :</p>

<pre><code>{$item-&gt;fielddefs.category.value}
</code></pre>

<p>Une solution existe, bien qu’un peu biaisée… </p>

<pre><code>&lt;!-- On sait que l'id de la catégorie "toto" = 1 --&gt;
{if {$item-&gt;fielddefs.category.value} ==1}
    toto
{/if}
</code></pre>

<h4 id="crer-un-champ-file-image">Créer un champ file (image)</h4>

<ol>
  <li>
    <p>Type de champ: <strong>File upload</strong></p>
  </li>
  <li>
    <p>Type de fichiers autorisés : <strong>gif,jpeg,jpg,png</strong></p>
  </li>
  <li>
    <p>Répertoire : <strong>repertoire1/{$item_id}/repertoire2</strong><br />
<em>Cette technique permet de classer les images par item. Si on ne fait pas ca, on risque à terme d’écraser les fichiers.</em></p>
  </li>
</ol>

<p>Dans le gabarit de notre Instance ListIt2, on va pouvoir appeler notre image de cette manière :</p>

<pre><code>{if {$item-&gt;fielddefs.alias-du-champ.value} !=NULL}
    {capture assign='url'}{root_url}/uploads/repertoire1/{$item-&gt;item_id}/repertoire2/{$item-&gt;fielddefs.alias-du-champ.value}{/capture}
    {CGSmartImage src=$url filter_croptofit="160,205"}
{/if} 
</code></pre>

<p><em>Dans cet exemple j’utilise en complément le module <strong>CGSmartImage</strong> qui permet entre autre de recadrer à la volée les images.</em></p>

<h4 id="instancier-un-champ-en-particulier">Instancier un champ en particulier</h4>

<p>Suivant la maquette et le brief d’un site, on va parfois avoir besoin d’afficher les champs au cas par cas (plutôt que faire une boucle qui va <em>standardiser</em> leur affichage).<br />
Pour appeler un champ spécifique : </p>

<pre><code>{$item-&gt;fielddefs.alias-du-champ.value}
</code></pre>

<p>On pourrait aussi décider d’afficher un bout de code, QUE si le champ est rempli :</p>

<pre><code>{if {$item-&gt;fielddefs.alias-du-champ.value} !=NULL}
    &lt;div&gt;{$item-&gt;fielddefs.alias-du-champ.value}&lt;/div&gt;
{/if}
</code></pre>

<h3 id="exemple-de-gabarit-listit2">Exemple de gabarit ListIt2</h3>

<p><em>Cet exemple fonctionne aussi bien pour un gabarit de sommaire, que de détail</em></p>

<pre><code>{if $items|@count &gt; 0}
   {foreach from=$items item=item}
        {$item-&gt;fielddefs.alias-du-champ.value}
        (...)
   {/foreach}
{/if}
</code></pre>


					<hr>
				</section>
				<section style="font-weight:bold; margin-bottom: 2em;">
					 
							<a rel="prev" class="a-hover"href="/2014/09/09/mes-habitudes-de-dev-avec-cmsms.html"><i class="icon-double-angle-left"></i> Base de travail pour développer un site avec CmsMadeSimple</a>
						
						
				</section>
				    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'firehall'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
			</article>
		</div>
	</section>
</main>


	<footer>
		<div class="container">
			<a href="http://richbray.me/frap/">Frappuccino</a> | <a href="/">blog.firehall.fr</a>
		</div>
	</footer>

	<!-- Footer
	    ================================================== -->

	<!-- Javascripts 
	    ================================================= -->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/custom.js"></script>
	    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'firehall'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    
    <!-- Analytics
    ================================================== -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52786142-1', 'auto');
      ga('send', 'pageview');

    </script>
    	
	</body>
</html>